{"ast":null,"code":"export const getAIMessageStream = async (input, history, onChunk) => {\n  const res = await fetch(\"http://localhost:8000/chat\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      message: input,\n      history\n    })\n  });\n  const reader = res.body.getReader();\n  const decoder = new TextDecoder(\"utf-8\");\n  let content = \"\";\n  while (true) {\n    const {\n      done,\n      value\n    } = await reader.read();\n    if (done) break;\n    const chunk = decoder.decode(value);\n    content += chunk;\n    onChunk(content); // update UI as we go\n  }\n  return {\n    role: \"assistant\",\n    content\n  };\n};\n\n// export const getAIMessage = async (userQuery, history) => {\n//   try {\n//     const res = await fetch(\"http://localhost:8000/chat\", {\n//       method: \"POST\",\n//       headers: {\n//         \"Content-Type\": \"application/json\",\n//       },\n//       body: JSON.stringify({\n//         message: userQuery,\n//         history: history,\n//       }),\n//     });\n\n//     const data = await res.json();\n//     return {\n//       role: \"assistant\",\n//       content: data.response,\n//     };\n//   } catch (error) {\n//     return {\n//       role: \"assistant\",\n//       content: \"⚠️ Something went wrong contacting the assistant.\",\n//     };\n//   }\n// };","map":{"version":3,"names":["getAIMessageStream","input","history","onChunk","res","fetch","method","headers","body","JSON","stringify","message","reader","getReader","decoder","TextDecoder","content","done","value","read","chunk","decode","role"],"sources":["/Users/prasanna/Documents/Instalily/on github/Instalily_Project/Frontend/src/api/api.js"],"sourcesContent":["export const getAIMessageStream = async (input, history, onChunk) => {\n  const res = await fetch(\"http://localhost:8000/chat\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ message: input, history }),\n  });\n\n  const reader = res.body.getReader();\n  const decoder = new TextDecoder(\"utf-8\");\n  let content = \"\";\n\n  while (true) {\n    const { done, value } = await reader.read();\n    if (done) break;\n    const chunk = decoder.decode(value);\n    content += chunk;\n    onChunk(content);  // update UI as we go\n  }\n\n  return { role: \"assistant\", content };\n};\n\n// export const getAIMessage = async (userQuery, history) => {\n//   try {\n//     const res = await fetch(\"http://localhost:8000/chat\", {\n//       method: \"POST\",\n//       headers: {\n//         \"Content-Type\": \"application/json\",\n//       },\n//       body: JSON.stringify({\n//         message: userQuery,\n//         history: history,\n//       }),\n//     });\n\n//     const data = await res.json();\n//     return {\n//       role: \"assistant\",\n//       content: data.response,\n//     };\n//   } catch (error) {\n//     return {\n//       role: \"assistant\",\n//       content: \"⚠️ Something went wrong contacting the assistant.\",\n//     };\n//   }\n// };\n"],"mappings":"AAAA,OAAO,MAAMA,kBAAkB,GAAG,MAAAA,CAAOC,KAAK,EAAEC,OAAO,EAAEC,OAAO,KAAK;EACnE,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,4BAA4B,EAAE;IACpDC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAEC,OAAO,EAAEV,KAAK;MAAEC;IAAQ,CAAC;EAClD,CAAC,CAAC;EAEF,MAAMU,MAAM,GAAGR,GAAG,CAACI,IAAI,CAACK,SAAS,CAAC,CAAC;EACnC,MAAMC,OAAO,GAAG,IAAIC,WAAW,CAAC,OAAO,CAAC;EACxC,IAAIC,OAAO,GAAG,EAAE;EAEhB,OAAO,IAAI,EAAE;IACX,MAAM;MAAEC,IAAI;MAAEC;IAAM,CAAC,GAAG,MAAMN,MAAM,CAACO,IAAI,CAAC,CAAC;IAC3C,IAAIF,IAAI,EAAE;IACV,MAAMG,KAAK,GAAGN,OAAO,CAACO,MAAM,CAACH,KAAK,CAAC;IACnCF,OAAO,IAAII,KAAK;IAChBjB,OAAO,CAACa,OAAO,CAAC,CAAC,CAAE;EACrB;EAEA,OAAO;IAAEM,IAAI,EAAE,WAAW;IAAEN;EAAQ,CAAC;AACvC,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}